<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>News Summaries</title>
    <script type="text/javascript" src="src/list.js">
    </script>
    <script type="text/javascript" src="src/article.js">
    </script>
    <script type="text/javascript" src="src/getNews.js">
    </script>
  </head>
  <body>
    <h1>News Summaries</h1>
    <div id="articles"></div>
  </body>
  <script type="text/javascript">
  var list = new List();
  // var url = 'https://news-summary-api.herokuapp.com/guardian?apiRequestUrl=http://content.guardianapis.com/search';
  var url = './js-test/newsstub.json'

    getNews(url).then(function(result){
      var obj = JSON.parse(result);
      return obj.response;
    }).then(function(response){
      list.add(response.results);
      for (var i in list.articles){
        var article = new Article(list.articles[i]);

        var div = document.createElement("div");
        div.setAttribute("id", "article-" + i);

        var headlineLi = document.createElement("li");
        var headlineA = document.createElement("a");
        headlineA.setAttribute("href", article.url)
        var headline = document.createTextNode(article.headline);
        headlineA.appendChild(headline);
        headlineLi.appendChild(headlineA);

        div.appendChild(headlineLi);

        document.getElementById('articles').appendChild(div);
      }
    }).catch(function(error){
      console.log(error);
    });

  </script>
</html>
