<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>News Summaries</title>
    <script type="text/javascript" src="src/list.js">
    </script>
    <script type="text/javascript" src="src/article.js">
    </script>
    <script type="text/javascript" src="src/getNews.js">
    </script>
  </head>
  <body>
    <div id="articles"></div>
  </body>
  <script type="text/javascript">
  var list = new List();

    getNews('http://news-summary-api.herokuapp.com/guardian?apiRequestUrl=http://content.guardianapis.com/search').then(function(result){
      var obj = JSON.parse(result);
      return obj.response;
    }).then(function(response){
      list.add(response.results);
      for (var i in list.articles){
        var article = new Article(list.articles[i]);
        var liElement = document.createElement("LI");
        var headline = document.createTextNode(article.headline);
        liElement.appendChild(headline);
        liElement.setAttribute("id", "article-" + i);
        document.getElementById('articles').appendChild(liElement)
      }
    }).catch(function(error){
      console.log(error);
    });

  </script>
</html>
